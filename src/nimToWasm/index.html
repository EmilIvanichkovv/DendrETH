<html>
  <head>
    <script>
    (async () => {
        const moduleName = 'add.wasm';
        const wasmModule = await fetch(moduleName)

        const importObject = {
            env: {
                print: x => {
                    console.log(x);
                }
            }
        };

        const { instance } = await WebAssembly.instantiateStreaming(wasmModule, importObject);
        console.log(instance);
        const { instance: { exports } } = await WebAssembly.instantiateStreaming(wasmModule, importObject);
        console.log(exports);
        const r = exports.printAdd(42, 25);
    })();
    </script>
  </head>
  <body>
    Test page
  </body>
</html>
